<ng-container *tuiLet="accountData$ | async as account">
  <div class="header">
    <tui-loader *ngIf="isLoading" size="l" [showLoader]="true"></tui-loader>
    <tui-avatar
      *ngIf="account"
      [avatarUrl]="'https://raw.githubusercontent.com/melpnz/rblp/master/icon/' + account.bank + '.svg'"
      [text]="banks.findById(account.bank)?.name ?? ''">
    </tui-avatar>
    {{ isLoading ? 'Загрузка' : account?.name }}
  </div>
  <div class="content">
    <tui-loader size="xxl" [showLoader]="isLoading" [overlay]="true"></tui-loader>
    <ng-container *ngIf="!isLoading && account">
      <div class="section">
        <h5 class="section-header">Действия</h5>
        <div class="actions">
          <button tuiAction type="button" class="action add-transaction" icon="tuiIconPlusLarge">
            Добавить транзакцию
          </button>
          <button tuiAction type="button" class="action edit" icon="tuiIconEdit2Large" (click)="editAccount()">
            Редактировать
          </button>
          <button tuiAction type="button" class="action close" icon="tuiIconLockLarge">Закрыть</button>
          <button tuiAction type="button" class="action delete" icon="tuiIconTrash2Large" (click)="deleteAccount()">
            Удалить
          </button>
        </div>
      </div>
      <div class="section">
        <h5 class="section-header">Транзакции</h5>
        <div class="transactions">
          <form [formGroup]="transactionForm" class="new-transaction">
            <div class="fields">
              <tui-input-date [formControl]="transactionForm.controls.date" tuiTextfieldSize="m">Дата</tui-input-date>
              <tui-select
                [formControl]="transactionForm.controls.type"
                [stringify]="operationTypeStringify"
                tuiTextfieldSize="m">
                Тип транзакции
                <tui-data-list-wrapper
                  *tuiDataList
                  [items]="operationTypes"
                  [itemContent]="operationTypeStringify | tuiStringifyContent"></tui-data-list-wrapper>
              </tui-select>
              <tui-input [formControl]="transactionForm.controls.memo" tuiTextfieldSize="m">Заметки</tui-input>
              <tui-input-number
                [formControl]="transactionForm.controls.amount"
                [tuiTextfieldPostfix]="'RUB' | tuiCurrency"
                tuiTextfieldSize="m">
                Сумма
              </tui-input-number>
            </div>
            <div class="buttons">
              <button tuiButton appearance="secondary" size="s">Отмена</button>
              <button tuiButton appearance="primary" size="s">Сохранить</button>
            </div>
          </form>
        </div>
      </div>
    </ng-container>
  </div>
</ng-container>
