<div class="toolbar">
  <button tuiButton size="s" appearance="primary" [icon]="'tuiIconPlus'" (click)="addRequested.emit()">
    Добавить вклад
  </button>
  <tui-hosted-dropdown [content]="columnsSelector">
    <button tuiButton size="s" type="button" [iconRight]="iconArrow" appearance="secondary">Выбор столбцов</button>
    <ng-template #columnsSelector>
      <monitraks-reorder
        [(items)]="allColumns"
        [(enabled)]="selectedColumns"
        class="columns-selector"></monitraks-reorder>
    </ng-template>
  </tui-hosted-dropdown>
</div>

<table tuiTable class="table" [columns]="selectedColumns">
  <thead>
    <tr tuiThGroup>
      <th *tuiHead="'name'" tuiTh>Название</th>
      <th *tuiHead="'bank'" tuiTh>Банк</th>
      <th *tuiHead="'currentTotalAmount'" tuiTh>Сумма</th>
      <th *tuiHead="'currentIncomeAmount'" tuiTh>Доход, руб</th>
      <th *tuiHead="'currentIncomePercent'" tuiTh>Доход, % год</th>
      <th *tuiHead="'expectedIncomeAmount'" tuiTh>Ожидаемый доход, руб</th>
      <th *tuiHead="'openedAt'" tuiTh>Дата открытия</th>
      <th *tuiHead="'duration'" tuiTh>Срок</th>
      <th *tuiHead="'closingAt'" tuiTh>Дата закрытия</th>
      <th *tuiHead="'currentNominalRate'" tuiTh>Номинальная ставка</th>
      <th *tuiHead="'currentRealRate'" tuiTh>Реальная ставка</th>
      <th *tuiHead="'interestInfo'" tuiTh [sorter]="null">Проценты</th>
    </tr>
  </thead>
  <tbody
    *tuiLet="accountsData | tuiTableSort | as: AccountTableData as sortedAccounts"
    tuiTbody
    [data]="sortedAccounts">
    <tr *ngFor="let account of sortedAccounts" tuiTr>
      <td *tuiCell="'name'" tuiTd>{{ account.name }}</td>
      <td *tuiCell="'bank'" tuiTd>{{ account.bank }}</td>
      <td *tuiCell="'currentTotalAmount'" tuiTd></td>
      <td *tuiCell="'currentIncomeAmount'" tuiTd></td>
      <td *tuiCell="'currentIncomePercent'" tuiTd></td>
      <td *tuiCell="'expectedIncomeAmount'" tuiTd></td>
      <td *tuiCell="'openedAt'" tuiTd>{{ account.openedAt }}</td>
      <td *tuiCell="'duration'" tuiTd>{{ account.duration }}</td>
      <td *tuiCell="'closingAt'" tuiTd>{{ account.closingAt }}</td>
      <td *tuiCell="'currentNominalRate'" tuiTd></td>
      <td *tuiCell="'currentRealRate'" tuiTd></td>
      <td *tuiCell="'interestInfo'" tuiTd>
        <tui-tag
          *ngIf="account.interestScheduleDescription.repeatType"
          [value]="account.interestScheduleDescription.repeatType"
          [autoColor]="true"></tui-tag>
        <tui-tag
          *ngIf="account.interestScheduleDescription.repeatDay"
          [value]="account.interestScheduleDescription.repeatDay"
          [autoColor]="true"></tui-tag>
        <tui-tag
          *ngIf="account.interestScheduleDescription.capitalization"
          [value]="account.interestScheduleDescription.capitalization"
          [autoColor]="true"></tui-tag>
        <tui-tag
          *ngIf="account.interestScheduleDescription.basis"
          [value]="account.interestScheduleDescription.basis"
          [autoColor]="true"></tui-tag>
        <tui-tag [value]="account.additionalInfo.canContribute" [autoColor]="true"></tui-tag>
        <tui-tag [value]="account.additionalInfo.canWithdraw" [autoColor]="true"></tui-tag>
      </td>
    </tr>
  </tbody>
</table>
